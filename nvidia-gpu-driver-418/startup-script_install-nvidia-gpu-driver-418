#!\/bin\/sh\r\nset -eux\r\n__nvidia_full_version=\"418_418.56-0ubuntu1\"\r\n__nvidia_short_version=\"418\"\r\nis_installed=false\r\nfor i in $(seq 1 5)\r\ndo\r\n  echo \"Connecting to http:\/\/archive.ubuntu.com site for $i time\"\r\n  if curl -s --head  --request GET http:\/\/archive.ubuntu.com\/ubuntu\/pool\/restricted\/n\/nvidia-graphics-drivers-${__nvidia_short_version} | grep \"HTTP\/1.1\" > \/dev\/null ;\r\n  then\r\n      echo \"Connected to http:\/\/archive.ubuntu.com. Start downloading and installing the NVIDIA driver...\"\r\n      __tempdir=\"$(mktemp -d)\"\r\n      apt-get install -y --no-install-recommends \"linux-headers-$(uname -r)\" dkms\r\n      wget -P \"${__tempdir}\" http:\/\/archive.ubuntu.com\/ubuntu\/pool\/restricted\/n\/nvidia-graphics-drivers-${__nvidia_short_version}\/nvidia-kernel-common-${__nvidia_full_version}_amd64.deb\r\n      wget -P \"${__tempdir}\" http:\/\/archive.ubuntu.com\/ubuntu\/pool\/restricted\/n\/nvidia-graphics-drivers-${__nvidia_short_version}\/nvidia-kernel-source-${__nvidia_full_version}_amd64.deb\r\n      wget -P \"${__tempdir}\" http:\/\/archive.ubuntu.com\/ubuntu\/pool\/restricted\/n\/nvidia-graphics-drivers-${__nvidia_short_version}\/nvidia-dkms-${__nvidia_full_version}_amd64.deb\r\n      dpkg -i \"${__tempdir}\"\/nvidia-kernel-common-${__nvidia_full_version}_amd64.deb \"${__tempdir}\"\/nvidia-kernel-source-${__nvidia_full_version}_amd64.deb \"${__tempdir}\"\/nvidia-dkms-${__nvidia_full_version}_amd64.deb\r\n      wget -P \"${__tempdir}\" http:\/\/archive.ubuntu.com\/ubuntu\/pool\/restricted\/n\/nvidia-graphics-drivers-${__nvidia_short_version}\/nvidia-utils-${__nvidia_full_version}_amd64.deb\r\n      wget -P \"${__tempdir}\" http:\/\/archive.ubuntu.com\/ubuntu\/pool\/restricted\/n\/nvidia-graphics-drivers-${__nvidia_short_version}\/libnvidia-compute-${__nvidia_full_version}_amd64.deb\r\n      dpkg -i \"${__tempdir}\"\/nvidia-utils-${__nvidia_full_version}_amd64.deb \"${__tempdir}\"\/libnvidia-compute-${__nvidia_full_version}_amd64.deb\r\n      rmmod nouveau\r\n      modprobe nvidia\r\n      nvidia-smi\r\n      is_installed=true\r\n      rm -r \"${__tempdir}\"\r\n      break\r\n  fi\r\n  sleep 2\r\ndone\r\nif [ $is_installed = true ];\r\nthen\r\n  echo \"NVIDIA driver has been installed.\"\r\nelse\r\n  echo \"NVIDIA driver has NOT been installed. Because we can NOT reach to http:\/\/archive.ubuntu.com site which hosted necessary deb packages for installation.\"\r\nfi